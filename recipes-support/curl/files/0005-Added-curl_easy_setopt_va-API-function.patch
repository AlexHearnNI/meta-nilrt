From 8c90c00fc5e164d25fee808078943b42c4e7bccd Mon Sep 17 00:00:00 2001
From: Jonathan David <jonathan.david@ni.com>
Date: Mon, 21 Jul 2014 14:58:37 -0500
Subject: [PATCH 05/22] Added curl_easy_setopt_va() API function

Added API function with `va_list` variable argument parameter in
addition to cURL's function using `...`.

Upstream-Status: Submitted [curl-library@cool.haxx.se]
---
 lib/easy.c | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

diff --git a/lib/easy.c b/lib/easy.c
index 939b20d..a562858 100644
--- a/lib/easy.c
+++ b/lib/easy.c
@@ -370,20 +370,28 @@ struct Curl_easy *curl_easy_init(void)
  * easy handle.
  */
 
-#undef curl_easy_setopt
-CURLcode curl_easy_setopt(struct Curl_easy *data, CURLoption tag, ...)
+CURLcode curl_easy_setopt_va(struct Curl_easy *data, CURLoption tag, va_list arg)
 {
-  va_list arg;
   CURLcode result;
 
   if(!data)
     return CURLE_BAD_FUNCTION_ARGUMENT;
 
-  va_start(arg, tag);
-
   result = Curl_setopt(data, tag, arg);
 
+  return result;
+}
+
+#undef curl_easy_setopt
+CURLcode curl_easy_setopt(struct Curl_easy *data, CURLoption tag, ...)
+{
+  CURLcode result;
+  va_list arg;
+  va_start(arg, tag);
+
+  result = curl_easy_setopt_va(data, tag, arg);
   va_end(arg);
+
   return result;
 }
 
-- 
2.10.2

