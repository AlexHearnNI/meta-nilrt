require xilinx-zynqhf.conf

IMAGE_FSTYPES_append = " wic "
IMAGE_BOOT_FILES = " ${KERNEL_IMAGETYPE} ${UBOOT_BINARY} ${@ '${KERNEL_IMAGE_SYMLINK_NAME}'.replace('${MACHINE}','${KERNEL_DEVICETREE}'.strip())} ${SPL_BINARYNAME} "
EXTRA_IMAGEDEPENDS_append = " \
                        dosfstools-native \
                        mtools-native \
                        ${IMAGE_DEPENDS_wic} \
"

SPL_BINARY = "spl/boot.bin"
SPL_BINARYNAME = "${@os.path.basename(d.getVar("SPL_BINARY",True))}"
UBOOT_BRANCH = "dev/bmouring/n310-rev3/cardassia/2017.01"
UBOOT_MACHINE = "ni_sulfur_rev3_config"
UBOOT_BINARY = "u-boot.img"
UBOOT_LOADADDRESS ?= "0x8000"
UBOOT_ENTRYPOINT ?= "${UBOOT_LOADADDRESS}"

KERNEL_IMAGETYPE = "uImage"
KERNEL_EXTRA_ARGS += "LOADADDR=0x8000"
KERNEL_DEVICETREE = " zynq-ni-sulfur-rev3.dtb "
KERNEL_IMAGE_SYMLINK_NAME = "${KERNEL_IMAGETYPE}-${MACHINE}"

# HACK - This is needed for wic stuff
RM_WORK_EXCLUDE_append = " ${IMAGE_BASENAME} "
