#@TYPE: Machine
#@Name: Xilinx Zynq Platform
#@DESCRIPTION: Machine configuration for Xilinx Zynq-7000

TARGET_ARCH = "arm"
#tune for the ARM Cortex A9
DEFAULTTUNE ?= "cortexa9hf-vfpv3"
require conf/machine/include/tune-cortexa9.inc

MACHINE_ARCH = "${@[d.getVar('TUNE_PKGARCH', True), d.getVar('MACHINE', True)][bool(d.getVar('MACHINE', True))]}"

MACHINE_FEATURES = "apm ext2 vfat ethernet screen usbgadget usbhost wifi"

SERIAL_CONSOLES = "115200;ttyS0"

INITRAMFS_FSTYPES = "cpio.gz.u-boot"

# we're not building a full u-boot in OE to be used on NI devices, just the
# fw_{print|set}env and mkimage utils + a fw_env.config file so we use the
# generic machine.
UBOOT_MACHINE ?= "config"

NILRT_ARM_DEVICE_CODES = "\
    762F 76D3 76D6 76F2 7740 7741 7742 7743 7744 774C \
    774E 775E 77AC 77B1 77B2 77D4 77D5 77D6 7885 \
"

KERNEL_DEVICETREE = "${@' '.join(["ni-%s.dtb" % x for x in "${NILRT_ARM_DEVICE_CODES}".split()])}"
